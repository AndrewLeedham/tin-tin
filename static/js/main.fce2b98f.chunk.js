(this["webpackJsonptin-tin"]=this["webpackJsonptin-tin"]||[]).push([[0],{100:function(e,t,n){e.exports=n(135)},135:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(59),o=n.n(c),i=n(48),l=n(151),u=n(38),s=n(148),m=Object(u.a)({},s.a,{colors:Object(u.a)({},s.a.colors,{brand:{50:"#ffe2e7",100:"#ffb3bb",200:"#fc8393",300:"#f9526d",400:"#f6224b",500:"#dd0939",600:"#ad0320",700:"#7c000e",800:"#4d0002",900:"#200400"}})}),d=n(64),f=n(50),b=n(17),h=n(31),v=n(76),E=n.n(v);n(105);E.a.initializeApp({apiKey:"AIzaSyDb3dX8j1yMlbNFGHI9QqRpSBjJ0WsWO4I",authDomain:"tin-tin-5e0d8.firebaseapp.com",databaseURL:"https://tin-tin-5e0d8.firebaseio.com",projectId:"tin-tin-5e0d8",storageBucket:"tin-tin-5e0d8.appspot.com",messagingSenderId:"196227528129",appId:"1:196227528129:web:51ad97056e103f78c2ab40"});var g=E.a;var p=n(90),j=0,y=1,O=2;function w(e){var t=window.localStorage.getItem("user");if(t)try{var n=JSON.parse(t);if(e&&n.sessionId!==e)return;return n}catch(a){return void console.warn("Could not read user from local session: ",a)}}function S(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={sessionId:e,admin:t,state:j,names:void 0};return window.localStorage.setItem("user",JSON.stringify(n)),n}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(a.useState)((function(){return e&&w(e)||S(e,!e)})),n=Object(b.a)(t,2),r=n[0],c=n[1];function o(e){window.localStorage.setItem("user",JSON.stringify(e)),c(e)}return[r,o]}var I=n(67),k=n(143),x=n(99),z=n(79),N=n(4),W=n(141),D=n(142);function F(e){var t=e.heading,n=e.subHeading,a=e.children;return r.a.createElement(N.a,{my:"10",maxW:"md",mx:"auto"},t&&r.a.createElement(W.a,{as:"h1",mb:2},t),n&&r.a.createElement(D.a,{fontSize:"xl",mb:5},n),a)}var A=n(26);function T(e){var t=e.children;return r.a.createElement("div",{style:{content:"",display:"table",clear:"both"}},t)}function J(e){var t=e.count,n=e.onSubmit,c=Object(a.useState)(new Array(t).fill("")),o=Object(b.a)(c,2),i=o[0],l=o[1];return r.a.createElement(F,{heading:"Submit your names",subHeading:"Enter the ".concat(t,' names you want to put in the tin, then press "Submit names".')},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(i)}},i.map((function(e,t){return r.a.createElement(I.a,{key:t,isRequired:!0,mb:4},r.a.createElement(k.a,{htmlFor:"name-".concat(t)},"Name ",t+1),r.a.createElement(x.a,{id:"name-".concat(t),value:e,onChange:function(e){return function(e,t){var n=Object(h.a)(i);n[e]=t,l(n)}(t,e.target.value)},mb:2}))})),r.a.createElement(z.a,{type:"submit",variant:"solid",variantColor:"green",rightIcon:A.d,float:"right"},"Submit names"),r.a.createElement(z.a,{variant:"outline",rightIcon:A.e,float:"left",onClick:function(){return n([])}},"Skip and join")),r.a.createElement(T,null))}var H=n(93),R=n(144);function B(e){var t=e.startTurn,n=e.round,a=e.noNames;return r.a.createElement(F,{heading:"Tin-tin",subHeading:'Welcome to tin-tin, press "Start turn" when it is your go. "Start round" will be shown if there are no names left.'},r.a.createElement(R.a,{isInline:!0,justify:"center",spacing:2},r.a.createElement(z.a,{onClick:t,variant:"solid",variantColor:"green",rightIcon:A.f,isDisabled:a},"Start ",n?"round":"turn")))}var P=n(145),M=n(146),U=n(46),_=n(149),q=n(72),G=n(94);function L(e){var t=e.names,n=e.endTurn,c=Object(a.useState)(t),o=Object(b.a)(c,2),i=o[0],l=o[1],u=Object(a.useState)(0),s=Object(b.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)(void 0),v=Object(b.a)(f,2),E=v[0],g=v[1],p=r.a.useState(),j=Object(b.a)(p,2),y=j[0],O=j[1],w=function(){return O(!1)},S=r.a.useRef();function C(e,t){var n=Object(h.a)(i);n[e].answered=!!t,l(n)}var I="undefined"!==typeof m||"undefined"!==typeof E?"".concat((null!==m&&void 0!==m?m:E)+1,"/").concat(i.length):"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{heading:"Tin-tin ".concat(I)},"undefined"!==typeof m||"undefined"!==typeof E?r.a.createElement(q.a,{onSwipe:function(e){var t=!1;e===q.b.LEFT?"undefined"!==typeof E?(C(E,!0),g(void 0),t=!0):g(m):e===q.b.RIGHT&&C(m,!0),t||(m+1<i.length?d(m+1):d(void 0))},renderButtons:function(e){var t=e.left,n=e.right;return r.a.createElement(R.a,{isInline:!0,flex:"1",justifyContent:"space-between",spacing:2,p:8},r.a.createElement(P.a,{size:"lg","aria-label":"undefined"===typeof E?"Pass":"Answered passed",icon:"undefined"===typeof E?A.c:A.b,variant:"solid",variantColor:"undefined"===typeof E?"red":"orange",onClick:t}),"undefined"!==typeof E&&"undefined"!==typeof m&&r.a.createElement(D.a,null,r.a.createElement("strong",null,"Passed:")," ",i[E].name),r.a.createElement(P.a,{size:"lg","aria-label":"undefined"!==typeof m?"Correct":"Answered passed",icon:A.b,variantColor:"undefined"!==typeof m?"green":"orange",onClick:"undefined"!==typeof m?n:t}))}},r.a.createElement(N.a,{rounded:"lg",borderWidth:1,py:"6rem",px:2,textAlign:"center"},r.a.createElement(D.a,{fontSize:"3xl",className:G.noselect},"undefined"!==typeof m?i[m].name:"Passed: ".concat(i[E].name)))):r.a.createElement(N.a,{py:"6rem",px:2,textAlign:"center"},r.a.createElement(D.a,{fontSize:"3xl",color:"grey.200"},"No more names!")),r.a.createElement(R.a,{isInline:!0,justify:"center",spacing:2,mt:10},r.a.createElement(z.a,{variant:"outline",variantColor:"red",rightIcon:A.g,onClick:function(){return O(!0)}},"End turn")),r.a.createElement(T,null)),r.a.createElement(M.a,{isOpen:y,leastDestructiveRef:S,onClose:w},r.a.createElement(U.f,null),r.a.createElement(M.b,null,r.a.createElement(U.e,{fontSize:"lg",fontWeight:"bold"},"Double check you did not mis-click anything:"),r.a.createElement(U.b,null,i.slice(0,"undefined"!==typeof m?m+1:i.length).map((function(e,t){var n=e.name,a=e.answered;return r.a.createElement(_.a,{id:"name-".concat(t),isChecked:a,onChange:function(e){return C(t,e.target.checked)},isInline:!0,isFullWidth:!0,key:t,rounded:"md",borderWidth:1,p:2,mb:2},n)})),r.a.createElement(D.a,null,"You scored",": "+i.reduce((function(e,t){var n=t.answered;return e+Number(n)}),0))),r.a.createElement(U.d,null,r.a.createElement(z.a,{ref:S,onClick:w},"Cancel"),r.a.createElement(z.a,{variantColor:"green",onClick:function(){return n(i)},ml:3},"Confirm")))))}var V=n(150);function Y(e){var t=e.error;return r.a.createElement(V.a,{status:"error",variant:"subtle",flexDirection:"column",justifyContent:"center",textAlign:"center",height:"200px"},r.a.createElement(V.c,{size:"40px",mr:0}),r.a.createElement(V.d,{mt:4,mb:1,fontSize:"lg"},"Something went wrong"),r.a.createElement(V.b,{maxWidth:"sm"},t))}function K(){var e=r.a.useState(),t=Object(b.a)(e,2)[1];return r.a.useCallback((function(e){t((function(){throw e}))}),[t])}function Q(e,t,n,a,r){return function(c){var o=e.carbon?Object.values(e.carbon):[];g.database().ref("sessions/".concat(t,"/carbon")).set([].concat(Object(h.a)(o),Object(h.a)(c))).catch(r),a(Object(u.a)({},n,{state:O}))}}function X(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}function $(e,t,n,a,r){return function(){var c=e.current?Object.values(e.current):Object.values(e.carbon);e.current||g.database().ref("sessions/".concat(t,"/current")).set(Object(h.a)(c)).catch(r),a(Object(u.a)({},n,{names:X(c).map((function(e){return{name:e,answered:!1}})),state:y}))}}function Z(e,t,n,a){return function(r){r=r.filter((function(e){return!e.answered})).map((function(e){return e.name})),g.database().ref("sessions/".concat(e,"/current")).set(Object(h.a)(r)).catch(a),n(Object(u.a)({},t,{names:void 0,state:O}))}}function ee(){var e=Object(f.g)().id,t=K(),n=Object(p.a)(g.database().ref("sessions/".concat(e))),a=Object(b.a)(n,3),c=a[0],o=a[1],i=a[2],l=C(e),u=Object(b.a)(l,2),s=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,o&&!i&&r.a.createElement(H.a,{size:"xl",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),i&&!o&&r.a.createElement(F,null,r.a.createElement(Y,{error:i.toString()})),!o&&!i&&function(e,t,n,a,c){switch(n.state){case j:return r.a.createElement(J,{count:e.count,onSubmit:Q(e,t,n,a,c)});case O:return r.a.createElement(B,{startTurn:$(e,t,n,a,c),round:!e.current||0===Object.values(e.current).length,noNames:!e.carbon||0===Object.values(e.carbon).length});case y:return r.a.createElement(L,{names:n.names,admin:n.admin,endTurn:Z(t,n,a,c)});default:return"Unknown state: ".concat(n.state)}}(c.val(),e,s,m,t))}var te=n(147);function ne(){var e=Object(a.useState)(4),t=Object(b.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(void 0),i=Object(b.a)(o,2),l=i[0],s=i[1],m=C(),d=Object(b.a)(m,2),h=d[0],v=d[1],E=K();return Object(a.useEffect)((function(){h.sessionId&&s(h.sessionId)}),[h.sessionId]),r.a.createElement(r.a.Fragment,null,l?r.a.createElement(f.a,{to:"/sessions/".concat(l)}):r.a.createElement(F,{heading:"Create a new session",subHeading:"Start a new tin-tin game session with the number of names per player you want. You will be redirected to a shareable url that other players can join from."},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),g.database().ref("sessions").push({count:n}).then((function(e){var t=e.key;v(Object(u.a)({},h,{sessionId:t}))})).catch((function(e){E(e)}))}},r.a.createElement(I.a,null,r.a.createElement(k.a,{htmlFor:"count"},"Number of names a player can select"),r.a.createElement(te.c,{id:"count",defaultValue:n,min:1,max:10,onChange:c,mb:4},r.a.createElement(te.d,null),r.a.createElement(te.e,null,r.a.createElement(te.b,null),r.a.createElement(te.a,null)))),r.a.createElement(z.a,{type:"submit",variant:"solid",variantColor:"green",rightIcon:A.a,float:"right"},"Create new session")),r.a.createElement(T,null)))}var ae=n(28),re=n(41),ce=n(35),oe=n(36),ie=function(e){Object(oe.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(ae.a)(this,n),(a=t.call(this,e)).state={error:void 0},a}return Object(re.a)(n,[{key:"render",value:function(){return this.state.error?r.a.createElement(F,null,r.a.createElement(Y,{error:this.state.error})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e.toString()}}}]),n}(r.a.Component);var le=function(){return r.a.createElement(d.a,null,r.a.createElement(i.a,{theme:m},r.a.createElement(l.a,null),r.a.createElement(ie,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/sessions/:id",component:ee}),r.a.createElement(f.b,{path:"/",component:ne})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},94:function(e,t,n){e.exports={noselect:"Playing_noselect__28UVJ"}}},[[100,1,2]]]);
//# sourceMappingURL=main.fce2b98f.chunk.js.map
(this["webpackJsonptin-tin"]=this["webpackJsonptin-tin"]||[]).push([[0],{103:function(e,t,n){e.exports={noselect:"Playing_noselect__28UVJ"}},108:function(e,t,n){e.exports=n(153)},153:function(e,t,n){"use strict";n.r(t);var a=n(36),r=n.n(a),o=n(57),i=n(1),c=n.n(i),l=n(66),s=n.n(l),u=n(39),m=n(162),d=n(172),f=n(69),b=n(41),v=n(168),g=Object(b.a)({},v.a,{colors:Object(b.a)({},v.a.colors,{brand:{50:"#ffe2e7",100:"#ffb3bb",200:"#fc8393",300:"#f9526d",400:"#f6224b",500:"#dd0939",600:"#ad0320",700:"#7c000e",800:"#4d0002",900:"#200400"}})}),h=n(62),E=n(55),p=n(8),O=n(31),j=n(21),w=n.n(j),S=n(97),y=0,C=1,k=2;function I(e){var t=window.localStorage.getItem("user");if(t)try{var n=JSON.parse(t);if(e&&n.sessionId!==e)return;return n}catch(a){return void console.warn("Could not read user from local session: ",a)}}function x(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={sessionId:e,admin:t,state:y,names:void 0};return window.localStorage.setItem("user",JSON.stringify(n)),n}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(i.useState)((function(){return e&&I(e)||x(e,!e)})),n=Object(p.a)(t,2),a=n[0],r=n[1];function o(e){window.localStorage.setItem("user",JSON.stringify(e)),r(e)}return[a,o]}var A=n(77),D=n(164),R=n(78),z=n(87),N=n(4),T=n(161),P=n(163),F=n(159),_=n(160);function J(e){var t=e.heading,n=void 0===t?"Tin-tin":t;return c.a.createElement(F.a,{align:"center",marginBottom:10},c.a.createElement(_.a,{size:"150px",src:"".concat(".","/logo512.png")}),c.a.createElement(T.a,null,n))}var L=n(14);function U(e){var t=e.header,n=e.heading,a=e.subHeading,r=e.children,o=e.showLeave;return c.a.createElement(N.a,{position:"relative",my:"10",maxW:"md",mx:"auto",px:"4"},t&&c.a.createElement(J,{heading:n}),n&&!t&&c.a.createElement(T.a,{as:"h1",mb:2},n),a&&c.a.createElement(m.a,{fontSize:"xl",mb:5},a),r,o&&c.a.createElement(P.a,{as:h.b,to:"/","aria-label":"Leave session",icon:L.g,variant:"outline",variantColor:"red",mt:10}))}var V=n(85);function M(e){var t=e.children;return c.a.createElement("div",{style:{content:"",display:"table",clear:"both"}},t)}function B(e){var t=e.count,n=e.onSubmit,a=Object(i.useState)(new Array(t).fill("")),r=Object(p.a)(a,2),o=r[0],l=r[1];return c.a.createElement(U,{heading:"Submit your names",subHeading:"Enter the ".concat(t,' names you want to put in the tin, then press "Submit names".'),showLeave:!0},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(o)}},o.map((function(e,t){return c.a.createElement(A.a,{key:t,isRequired:!0,mb:4},c.a.createElement(D.a,{htmlFor:"name-".concat(t)},"Name ",t+1),c.a.createElement(R.a,{id:"name-".concat(t),value:e,onChange:function(e){return function(e,t){var n=Object(O.a)(o);n[e]=t,l(n)}(t,e.target.value)},mb:2,minLength:1,maxLength:30}))})),c.a.createElement(z.a,{type:"submit",variant:"solid",variantColor:"green",rightIcon:V.a,float:"right"},"Submit names"),c.a.createElement(z.a,{variant:"outline",rightIcon:V.b,float:"left",onClick:function(){return n([])}},"Skip and join")),c.a.createElement(M,null))}var H=n(100),q=n(167);function K(e){var t=e.startTurn,n=e.round,a=e.noNames,r=e.timer,o=e.lock,l=Object(i.useState)(r?Math.floor(r/60):1),s=Object(p.a)(l,2),u=s[0],m=s[1],d=Object(i.useState)(r?Math.floor(r%60):0),f=Object(p.a)(d,2),b=f[0],v=f[1],g=Object(i.useRef)(null),h=Object(i.useRef)(null);return c.a.createElement(U,{heading:"Wait for your turn",subHeading:'Welcome to tin-tin, press "Start turn" when it is your turn. "Start round" will be shown if there are no names left.',showLeave:!0},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(u,b)}},c.a.createElement(F.a,{isInline:!0,spacing:4,mb:4},c.a.createElement(A.a,null,c.a.createElement(D.a,{htmlFor:"minutes"},"Minutes"),c.a.createElement(q.c,{id:"minutes",value:u,min:0,max:5,isInvalid:0===u&&0===b,ref:h,onChange:function(e){var t=h.current.children[0],n=g.current.children[0];0===e&&0===b?(t.setCustomValidity("Either minutes or seconds must be over 0"),t.reportValidity()):(t.setCustomValidity(""),n.setCustomValidity("")),m(e)}},c.a.createElement(q.d,{type:"number"}),c.a.createElement(q.e,null,c.a.createElement(q.b,null),c.a.createElement(q.a,null)))),c.a.createElement(A.a,null,c.a.createElement(D.a,{htmlFor:"seconds"},"Seconds"),c.a.createElement(q.c,{id:"seconds",value:b,min:0,max:60,isInvalid:0===u&&0===b,ref:g,onChange:function(e){var t=h.current.children[0],n=g.current.children[0];0===e&&0===u?(n.setCustomValidity("Either minutes or seconds must be over 0"),n.reportValidity()):(t.setCustomValidity(""),n.setCustomValidity("")),v(e)}},c.a.createElement(q.d,{type:"number"}),c.a.createElement(q.e,null,c.a.createElement(q.b,null),c.a.createElement(q.a,null))))),c.a.createElement(F.a,{isInline:!0,justify:"space-between"},c.a.createElement(z.a,{variant:"outline",variantColor:"blue",rightIcon:L.b,onClick:function(){m(1),v(0)}},"1 Minute"),c.a.createElement(z.a,{variant:"outline",variantColor:"blue",rightIcon:L.b,onClick:function(){m(0),v(30)}},"30 seconds"),c.a.createElement(z.a,{type:"submit",variant:n?"solid":"outline",variantColor:"green",rightIcon:L.i,isDisabled:a||o},"Start ",n?"round":"turn"))),c.a.createElement(M,null))}var Y=n(165),G=n(52),X=n(169),Q=n(80),$=n(103),Z=n(79);function ee(e){var t=e.toString();return 1===t.length?"0"+t:t}function te(e){var t=e.time,n=e.reset,a=e.toggle,r=e.isPaused,o=Object(Z.a)(e,["time","reset","toggle","isPaused"]),l=Object(i.useState)(!1),s=Object(p.a)(l,2),u=s[0],d=s[1];return c.a.createElement(f.a,Object.assign({rounded:"md",borderWidth:1,borderColor:"black",px:1,alignItems:"center"},o),c.a.createElement(P.a,{size:"sm","aria-label":"Hide timer",icon:u?L.d:L.e,variant:"ghost",onClick:function(){return d(!u)}}),c.a.createElement(m.a,{as:"span",fontSize:"md",style:{fontVariantNumeric:"tabular-nums"},opacity:u?0:1,mx:2},ee(Math.floor(t/60)),":",ee(Math.floor(t%60))),c.a.createElement(P.a,{size:"sm","aria-label":r?"Resume timer":"Pause timer",icon:r?L.i:L.h,variant:"ghost",onClick:function(){return a()}}),c.a.createElement(P.a,{size:"sm","aria-label":"Reset timer",icon:L.l,variant:"ghost",onClick:function(){return n()}}))}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(i.useState)((function(){var n=window.localStorage.getItem(e);if(null!==n)try{return JSON.parse(n)}catch(a){}return t})),a=Object(p.a)(n,2),r=a[0],o=a[1];function c(t){window.localStorage.setItem(e,JSON.stringify(t)),o(t)}function l(){window.localStorage.removeItem(e)}return[r,c,l]}function ae(e){var t=e.names,n=e.endTurn,a=e.timer,r=ne("names",t),o=Object(p.a)(r,3),l=o[0],s=o[1],u=o[2],d=ne("currentTile",0),b=Object(p.a)(d,3),v=b[0],g=b[1],h=b[2],E=ne("passed",null),j=Object(p.a)(E,3),w=j[0],S=j[1],y=j[2],C=ne("isOpen",!1),k=Object(p.a)(C,3),I=k[0],x=k[1],W=k[2],A=ne("isCancelable",!0),D=Object(p.a)(A,3),R=D[0],T=D[1],_=D[2],J=function(e,t){var n=Object(i.useState)(!1),a=Object(p.a)(n,2),r=a[0],o=a[1],c=ne("time",e),l=Object(p.a)(c,3),s=l[0],u=l[1],m=l[2],d=Object(i.useState)(Date.now()),f=Object(p.a)(d,2),b=f[0],v=f[1],g=Object(i.useState)((function(){var e=new Audio("".concat(".","/alarm.mp3"));return e.loop=!0,e})),h=Object(p.a)(g,1)[0],E=Object(i.useState)(!1),O=Object(p.a)(E,2),j=O[0],w=O[1];return Object(i.useEffect)((function(){var e=setInterval((function(){if(!0!==r){var e=Date.now();e-b>=1e3?s-1>0?u(s-1):(u(0),o(!0),h.play(),w(!0),t&&t()):v(e)}}),1e3);return function(){return clearInterval(e)}})),[s,r,o,function(){u(e),v(Date.now()),h.pause(),w(!1)},function(){m(),h.pause()},j,function(){h.pause(),w(!1)}]}(a,(function(){T(!1),x(!0)})),V=Object(p.a)(J,7),B=V[0],H=V[1],q=V[2],K=V[3],Z=V[4],ee=V[5],ae=V[6],re=function(){q(!1),x(!1)};var oe=c.a.useRef();function ie(e,t){var n=Object(O.a)(l);n[e].answered=!!t,s(n)}var ce=null!==v||null!==w?"".concat((null!==v&&void 0!==v?v:w)+1,"/").concat(l.length):"";return c.a.createElement(c.a.Fragment,null,c.a.createElement(U,{heading:"Tin-tin ".concat(ce)},null!==v||null!==w?c.a.createElement(Q.a,{onSwipe:function(e){var t=!1;e===Q.b.LEFT?null!==w?(ie(w,!0),S(null),t=!0):S(v):e===Q.b.RIGHT&&ie(v,!0),t||(v+1<l.length?g(v+1):g(null))},renderButtons:function(e){var t=e.left,n=e.right;return c.a.createElement(F.a,{isInline:!0,flex:"1",justifyContent:"space-between",alignItems:"center",spacing:2,p:8},c.a.createElement(P.a,{size:"lg","aria-label":null===w?"Pass":"Answered passed",icon:null===w?L.c:L.m,variant:"solid",variantColor:null===w?"red":"orange",onClick:t}),null!==w&&null!==v&&c.a.createElement(m.a,{flexGrow:"1"},c.a.createElement("strong",null,"Passed:")," ",l[w].name),c.a.createElement(P.a,{size:"lg","aria-label":null!==v?"Correct":"Answered passed",icon:null!==v?L.a:L.m,variantColor:null!==v?"green":"orange",onClick:null!==v?n:t}))}},c.a.createElement(N.a,{rounded:"lg",borderWidth:1,py:"6rem",px:2,textAlign:"center"},c.a.createElement(m.a,{fontSize:"3xl",className:$.noselect},null!==v?l[v].name:"Passed: ".concat(l[w].name)))):c.a.createElement(N.a,{py:"6rem",px:2,textAlign:"center"},c.a.createElement(m.a,{fontSize:"3xl",color:"grey.200"},"No more names!")),c.a.createElement(f.a,{justifyContent:"space-between",mt:10},c.a.createElement(te,{time:B,reset:K,initialTime:a,isPaused:H,toggle:function(){return q(!H)}}),c.a.createElement(z.a,{variant:"outline",variantColor:"red",rightIcon:L.h,onClick:function(){q(!0),x(!0)}},"End turn")),c.a.createElement(M,null)),c.a.createElement(Y.a,{isOpen:I,leastDestructiveRef:R&&oe,onClose:R&&re,closeOnOverlayClick:R,closeOnEsc:R},c.a.createElement(G.f,null),ee?c.a.createElement(Y.b,null,c.a.createElement(G.e,{fontSize:"lg",fontWeight:"bold",textAlign:"center"},"Time is up!"),c.a.createElement(G.b,{paddingBottom:5},c.a.createElement(F.a,{isInline:!0,justify:"center"},c.a.createElement(z.a,{onClick:ae,flexDirection:"column",paddingX:8,paddingY:12,variantColor:"red"},c.a.createElement(L.o,{size:30,style:{marginBottom:"0.5rem"}}),"Stop Alarm")))):c.a.createElement(Y.b,null,c.a.createElement(G.e,{fontSize:"lg",fontWeight:"bold"},"Double check you did not mis-click anything:"),c.a.createElement(G.b,null,l.slice(0,null!==v?v+1:l.length).map((function(e,t){var n=e.name,a=e.answered;return c.a.createElement(X.a,{id:"name-".concat(t),isChecked:a,onChange:function(e){return ie(t,e.target.checked)},isInline:!0,isFullWidth:!0,key:t,rounded:"md",borderWidth:1,p:2,mb:2},n)})),c.a.createElement(m.a,null,"You scored",": "+l.reduce((function(e,t){var n=t.answered;return e+Number(n)}),0))),c.a.createElement(G.d,null,R&&c.a.createElement(z.a,{ref:oe,onClick:re},"Cancel"),c.a.createElement(z.a,{variantColor:"green",onClick:function(){u(),h(),y(),W(),_(),Z(),n(l)},ml:3},"Confirm")))))}var re=n(170);function oe(e){var t=e.title,n=void 0===t?"Something went wrong":t,a=e.error;return c.a.createElement(re.a,{status:"error",variant:"subtle",flexDirection:"column",justifyContent:"center",textAlign:"center",height:"200px"},c.a.createElement(re.c,{size:"40px",mr:0}),c.a.createElement(re.d,{mt:4,mb:1,fontSize:"lg"},n),c.a.createElement(re.b,{maxWidth:"sm"},a.toString()))}function ie(){var e=c.a.useState(),t=Object(p.a)(e,2)[1];return c.a.useCallback((function(e){t((function(){throw e}))}),[t])}var ce=n(106),le=n.n(ce);function se(e,t){return ue.apply(this,arguments)}function ue(){return(ue=Object(o.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.database().ref("sessions/".concat(t,"/events")).push({data:n,timestamp:Date.now()}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t,n,a,r){return function(o){var i=e.carbon?Object.values(e.carbon):[];w.a.database().ref("sessions/".concat(t,"/carbon")).set([].concat(Object(O.a)(i),Object(O.a)(o))).then((function(){a(Object(b.a)({},n,{state:k}))})).catch(r)}}function de(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}function fe(e,t,n,a,i){return function(c,l){w.a.database().ref("sessions/".concat(e)).once("value").then((function(s){var u=s.val();u.lock||w.a.database().ref("sessions/".concat(e,"/lock")).set(!0).then(Object(o.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u.current?Object.values(u.current):Object.values(u.carbon),u.current){t.next=4;break}return t.next=4,w.a.database().ref("sessions/".concat(e,"/current")).set(Object(O.a)(n)).catch(a);case 4:return t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).then((function(e){n(Object(b.a)({},t,{names:de(e).map((function(e){return{name:e,answered:!1}})),state:C,timer:60*c+l}))})).then((function(){var t;se(e,{event:"start_turn",current:JSON.stringify(null!==(t=u.current)&&void 0!==t?t:[]),minutes:c,seconds:l,round:i})})).catch(a)}))}}function be(e,t,n,a,r){return function(o){var i=Object(O.a)(o),c=o.filter((function(e){return!e.answered}));o=c.map((function(e){return e.name})),w.a.database().ref("sessions/".concat(t,"/current")).set(Object(O.a)(o)).then((function(){return w.a.database().ref("sessions/".concat(t,"/lock")).set(!1)})).then((function(){a(Object(b.a)({},n,{names:void 0,state:k}))})).then((function(){var n;se(t,{event:"end_turn",n:i.length-c.length,before:JSON.stringify(i),after:JSON.stringify(c),current:JSON.stringify(null!==(n=e.current)&&void 0!==n?n:[])})})).catch(r)}}function ve(){var e=Object(E.h)().id,t=ie(),n=Object(S.a)(w.a.database().ref("sessions/".concat(e))),a=Object(p.a)(n,3),r=a[0],o=a[1],i=a[2],l=W(e),s=Object(p.a)(l,2),u=s[0],d=s[1],b=r&&r.val(),v=le()();return c.a.createElement(c.a.Fragment,null,(o&&!i||!v)&&c.a.createElement(f.a,{alignItems:"center",justifyContent:"center",direction:"column",mt:16},!v&&c.a.createElement(m.a,{mb:4,fontSize:"lg"},"Offline, reconnecting"),c.a.createElement(H.a,{size:"xl",transform:"translate(-50%, -50%)"})),(i||!b)&&!o&&v&&c.a.createElement(U,null,c.a.createElement(oe,{title:i?void 0:"Session ID does not exist",error:i?i.toString():"Please check you copied it correctly"})),!o&&!i&&b&&v&&function(e,t,n,a,r){switch(n.state){case y:return c.a.createElement(B,{count:e.count,onSubmit:me(e,t,n,a,r)});case k:return c.a.createElement(K,{startTurn:fe(t,n,a,r,!e.current||0===Object.values(e.current).length),round:!e.current||0===Object.values(e.current).length,noNames:!e.carbon||0===Object.values(e.carbon).length,timer:n.timer,lock:!!e.lock});case C:return c.a.createElement(ae,{names:n.names,timer:n.timer,endTurn:be(e,t,n,a,r)});default:return"Unknown state: ".concat(n.state)}}(r.val(),e,u,d,t))}var ge=n(171),he=n(107),Ee=n(166);function pe(e){var t=e.text,n=Object(Z.a)(e,["text"]);return c.a.createElement(N.a,Object.assign({position:"relative"},n),c.a.createElement(Ee.a,{borderColor:"gray.400"}),c.a.createElement(m.a,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",paddingX:2},t))}function Oe(){var e=Object(i.useState)(""),t=Object(p.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(""),o=Object(p.a)(r,2),l=o[0],s=o[1],u=Object(i.useState)(""),m=Object(p.a)(u,2),d=m[0],f=m[1],v=Object(he.a)(w.a.auth()),g=Object(p.a)(v,3),h=g[0],O=g[1],j=g[2],S=Object(i.useState)(void 0),y=Object(p.a)(S,2),C=y[0],k=y[1],I=Object(i.useState)(4),x=Object(p.a)(I,2),N=x[0],T=x[1],P=Object(i.useState)(void 0),F=Object(p.a)(P,2),_=F[0],J=F[1],V=Object(i.useState)(""),B=Object(p.a)(V,2),K=B[0],Y=B[1],G=W(),X=Object(p.a)(G,2),Q=X[0],$=X[1],Z=ie(),ee=Object(E.g)();function te(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),ee.push("/sessions/".concat(encodeURIComponent(n)))}},c.a.createElement(A.a,{mb:4},c.a.createElement(D.a,{htmlFor:"session"},"Enter a session id:"),c.a.createElement(ge.a,{size:"md"},c.a.createElement(R.a,{type:"text",id:"session",value:n,onChange:function(e){return a(e.target.value)},style:{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},isRequired:!0}))),c.a.createElement(z.a,{type:"submit",size:"md",variantColor:"green",rightIcon:L.n},"Join")))}return Object(i.useEffect)((function(){Q.sessionId&&J(Q.sessionId)}),[Q.sessionId]),c.a.createElement(c.a.Fragment,null,O&&!j&&c.a.createElement(H.a,{size:"xl",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),!O&&j&&c.a.createElement(U,null,c.a.createElement(oe,{error:j.toString()})),!O&&!j&&h&&(_?c.a.createElement(E.a,{to:"/sessions/".concat(_)}):c.a.createElement(U,{header:!0,heading:"Create a new session",subHeading:"Start a new tin-tin game session with the number of names per player you want. You will be redirected to a shareable url that other players can join from."},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),(K&&K.length>0&&K.length<20?w.a.database().ref("sessions/".concat(K)).once("value").then((function(e){return!e.val()})):Promise.resolve(!1)).then((function(e){e?w.a.database().ref("sessions/".concat(K)).set({count:N,timestamp:Date.now()}).then((function(){$(Object(b.a)({},Q,{sessionId:K}))})).catch(Z):w.a.database().ref("sessions").push({count:N,timestamp:Date.now()}).then((function(e){var t=e.key;$(Object(b.a)({},Q,{sessionId:t}))})).catch(Z)}))}},c.a.createElement(A.a,null,c.a.createElement(D.a,{htmlFor:"count"},"Number of names a player can select"),c.a.createElement(q.c,{id:"count",defaultValue:N,min:1,max:10,onChange:T,mb:4},c.a.createElement(q.d,{type:"number"}),c.a.createElement(q.e,null,c.a.createElement(q.b,null),c.a.createElement(q.a,null)))),c.a.createElement(A.a,null,c.a.createElement(D.a,{htmlFor:"customID"},"Custom Session ID"),c.a.createElement(R.a,{id:"customID",type:"text",onChange:function(e){return Y(e.target.value)},value:K,mb:4})),c.a.createElement(z.a,{variant:"outline",rightIcon:L.g,float:"left",onClick:function(){w.a.auth().signOut().catch(k)}},"Logout"),c.a.createElement(z.a,{type:"submit",variant:"solid",variantColor:"green",rightIcon:L.j,float:"right"},"Create new session")),c.a.createElement(M,null),c.a.createElement(pe,{text:"or",marginY:10}),te())),!h&&!O&&!j&&c.a.createElement(U,{header:!0,subHeading:"Join a session with a unique session id or login to create a new session (closed beta)."},C&&c.a.createElement(oe,{error:C}),te(),c.a.createElement(pe,{text:"or",marginY:10}),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),k(void 0),w.a.auth().signInWithEmailAndPassword(l,d).catch(k)}},c.a.createElement(A.a,{isRequired:!0,mb:4},c.a.createElement(D.a,{htmlFor:"username"},"Username"),c.a.createElement(R.a,{type:"email",id:"username",value:l,onChange:function(e){return s(e.target.value)},mb:2})),c.a.createElement(A.a,{isRequired:!0,mb:4},c.a.createElement(D.a,{htmlFor:"password"},"Password"),c.a.createElement(R.a,{type:"password",id:"password",value:d,onChange:function(e){return f(e.target.value)},mb:2})),c.a.createElement(z.a,{type:"submit",variant:"solid",variantColor:"green",rightIcon:L.f},"Sign in"))))}var je=n(33),we=n(49),Se=n(43),ye=n(44),Ce=function(e){Object(ye.a)(n,e);var t=Object(Se.a)(n);function n(e){var a;return Object(je.a)(this,n),(a=t.call(this,e)).state={error:void 0},a}return Object(we.a)(n,[{key:"render",value:function(){return this.state.error?c.a.createElement(U,null,c.a.createElement(oe,{error:this.state.error})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e.toString()}}}]),n}(c.a.Component);var ke=function(e){var t=e.isUpdateAvailable,n=e.updateAssets;return c.a.createElement(h.a,null,c.a.createElement(u.a,{theme:g},c.a.createElement(m.a,{position:"absolute",top:"0",right:"0",color:"gray.500",p:2,fontSize:"xs"},Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_VERSION),c.a.createElement(d.a,null),c.a.createElement(Ce,null,c.a.createElement(E.d,null,c.a.createElement(E.b,{path:"/sessions/:id",component:ve}),c.a.createElement(E.b,{path:"/",component:Oe})),t&&c.a.createElement(f.a,{position:"fixed",bottom:2,left:"0",right:"0",justifyContent:"center"},c.a.createElement(re.a,{status:"info",rounded:"md"},c.a.createElement(re.c,null),c.a.createElement(re.b,{mr:2},"A new version of Tin-tin is available! Refresh to update."),c.a.createElement(P.a,{icon:L.k,onClick:n,size:"sm",variant:"ghost"}))))))},Ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xe(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");Ie?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):We(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):We(t,e)}))}}function We(e,t){navigator.serviceWorker.register(e).then((function(e){e.waiting&&t&&t.onWaiting&&t.onWaiting(e.waiting),e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ae=Object(i.createContext)(),De=function(e){var t=e.children,n=Object(i.useState)(null),a=Object(p.a)(n,2),r=a[0],o=a[1],l=Object(i.useState)(!1),s=Object(p.a)(l,2),u=s[0],m=s[1];Object(i.useEffect)((function(){xe({onUpdate:function(e){o(e.waiting),m(!0)},onWaiting:function(e){o(e),m(!0)}})}),[]),Object(i.useEffect)((function(){r&&r.addEventListener("statechange",(function(e){"activated"===e.target.state&&window.location.reload()}))}),[r]);var d=Object(i.useMemo)((function(){return{isUpdateAvailable:u,updateAssets:function(){r&&r.postMessage({type:"SKIP_WAITING"})}}}),[u,r]);return c.a.createElement(Ae.Provider,{value:d},t)};function Re(){var e=Object(i.useContext)(Ae),t=e.isUpdateAvailable,n=e.updateAssets;return c.a.createElement(c.a.Fragment,null,c.a.createElement(ke,{isUpdateAvailable:t,updateAssets:n}))}window.addEventListener("error",function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.error(t),navigator.serviceWorker){e.next=3;break}return e.abrupt("return");case 3:return e.next=6,navigator.serviceWorker.ready;case 6:((n=e.sent).installing||n.waiting)&&navigator.serviceWorker.ready.then(function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.unregister();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s.a.render(c.a.createElement(De,null,c.a.createElement(Re,null)),document.getElementById("root"))},21:function(e,t,n){var a=n(114);n(115),n(118);a.initializeApp({apiKey:"AIzaSyDb3dX8j1yMlbNFGHI9QqRpSBjJ0WsWO4I",authDomain:"tin-tin-5e0d8.firebaseapp.com",databaseURL:"https://tin-tin-5e0d8.firebaseio.com",projectId:"tin-tin-5e0d8",storageBucket:"tin-tin-5e0d8.appspot.com",messagingSenderId:"196227528129",appId:"1:196227528129:web:51ad97056e103f78c2ab40"}),e.exports=a}},[[108,1,2]]]);
//# sourceMappingURL=main.c06a8052.chunk.js.map
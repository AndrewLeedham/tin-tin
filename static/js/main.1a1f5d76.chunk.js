(this["webpackJsonptin-tin"]=this["webpackJsonptin-tin"]||[]).push([[0],{106:function(e,t,n){e.exports={noselect:"Playing_noselect__28UVJ"}},109:function(e,t,n){e.exports=n(154)},154:function(e,t,n){"use strict";n.r(t);var a=n(36),r=n.n(a),o=n(57),i=n(1),c=n.n(i),l=n(66),s=n.n(l),u=n(39),m=n(163),d=n(173),f=n(69),b=n(41),v=n(169),g=Object(b.a)({},v.a,{colors:Object(b.a)({},v.a.colors,{brand:{50:"#ffe2e7",100:"#ffb3bb",200:"#fc8393",300:"#f9526d",400:"#f6224b",500:"#dd0939",600:"#ad0320",700:"#7c000e",800:"#4d0002",900:"#200400"}})}),h=n(62),E=n(55),p=n(7),O=n(31),j=n(21),w=n.n(j),y=n(98),S=0,C=1,k=2;function x(e){var t=window.localStorage.getItem("user");if(t)try{var n=JSON.parse(t);if(e&&n.sessionId!==e)return;return n}catch(a){return void console.warn("Could not read user from local session: ",a)}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={sessionId:e,admin:t,state:S,names:void 0,playerName:void 0};return window.localStorage.setItem("user",JSON.stringify(n)),n}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(i.useState)((function(){return e&&x(e)||I(e,!e)})),n=Object(p.a)(t,2),a=n[0],r=n[1];function o(e){window.localStorage.setItem("user",JSON.stringify(e)),r(e)}return[a,o]}var A=n(77),R=n(167),N=n(78),z=n(88),D=n(4),F=n(162),P=n(164),L=n(165),T=n(52),J=n(160),V=n(161);function M(e){var t=e.heading,n=void 0===t?"Tin-tin":t;return c.a.createElement(J.a,{align:"center",marginBottom:10},c.a.createElement(V.a,{size:"150px",src:"".concat(".","/logo512.png"),alt:"Tin-tin"}),c.a.createElement(F.a,null,n))}var U=n(14),_=n(84);function H(e){var t=e.header,n=e.heading,a=e.subHeading,r=e.children,o=e.showLeave,i=c.a.useState(),l=Object(p.a)(i,2),s=l[0],u=l[1],d=function(){return u(!1)},f=c.a.useRef();return c.a.createElement(c.a.Fragment,null,c.a.createElement(D.a,{className:_.page,position:"relative",py:"10",maxW:"md",mx:"auto",px:"4"},c.a.createElement("div",null,t&&c.a.createElement(M,{heading:n}),n&&!t&&c.a.createElement(F.a,{as:"h1",mb:2},n),a&&c.a.createElement(m.a,{fontSize:"xl",mb:5},a),r),o&&c.a.createElement("footer",{className:_.footer},c.a.createElement(P.a,{onClick:function(){return u(!0)},"aria-label":"Leave session",icon:U.g,variant:"outline",variantColor:"red",mt:10}))),c.a.createElement(L.a,{isOpen:s,leastDestructiveRef:f,onClose:d},c.a.createElement(T.f,null),c.a.createElement(L.b,null,c.a.createElement(T.e,{fontSize:"lg",fontWeight:"bold"},"Leave session"),c.a.createElement(T.b,null,"Are you sure you want to leave?"),c.a.createElement(T.d,null,c.a.createElement(z.a,{ref:f,onClick:d},"Cancel"),c.a.createElement(z.a,{as:h.b,to:"/",variantColor:"red",ml:3},"Leave session")))))}var B=n(87);function Y(e){var t=e.children;return c.a.createElement("div",{style:{content:"",display:"table",clear:"both"}},t)}var q=n(79),G=n(166);function X(e){var t=e.text,n=Object(q.a)(e,["text"]);return c.a.createElement(D.a,Object.assign({position:"relative"},n),c.a.createElement(G.a,{borderColor:"gray.400"}),c.a.createElement(m.a,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",paddingX:2},t))}function K(e){var t=e.count,n=e.onSubmit,a=Object(i.useState)(new Array(t).fill("")),r=Object(p.a)(a,2),o=r[0],l=r[1],s=Object(i.useState)(""),u=Object(p.a)(s,2),m=u[0],d=u[1],f=Object(i.useRef)(null);return c.a.createElement(H,{heading:"Submit your names",subHeading:"Enter the ".concat(t,' names you want to put in the tin, then press "Submit names".'),showLeave:!0},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(m,o)}},c.a.createElement(A.a,{isRequired:!0,mb:4},c.a.createElement(R.a,{htmlFor:"player-name"},"Your name"),c.a.createElement(N.a,{id:"player-name",value:m,onChange:function(e){return d(e.target.value)},mb:2,minLength:1,maxLength:30,ref:f})),c.a.createElement(X,{marginY:10}),o.map((function(e,t){return c.a.createElement(A.a,{key:t,isRequired:!0,mb:4},c.a.createElement(R.a,{htmlFor:"name-".concat(t)},"Name ",t+1),c.a.createElement(N.a,{id:"name-".concat(t),value:e,onChange:function(e){return function(e,t){var n=Object(O.a)(o);n[e]=t,l(n)}(t,e.target.value)},mb:2,minLength:1,maxLength:30}))})),c.a.createElement(z.a,{type:"submit",variant:"solid",variantColor:"green",rightIcon:B.a,float:"right"},"Submit names"),c.a.createElement(z.a,{variant:"outline",rightIcon:B.b,float:"left",onClick:function(){var e=f.current;e.checkValidity()?n(m,[]):e.reportValidity()}},"Skip and join")),c.a.createElement(Y,null))}var Q=n(101),$=n(168);function Z(e){var t=e.user,n=e.startTurn,a=e.round,r=e.noNames,o=e.timer,l=e.lock,s=Object(i.useState)(o?Math.floor(o/60):1),u=Object(p.a)(s,2),d=u[0],f=u[1],b=Object(i.useState)(o?Math.floor(o%60):0),v=Object(p.a)(b,2),g=v[0],h=v[1],E=Object(i.useRef)(null),O=Object(i.useRef)(null),j=c.a.useState(),w=Object(p.a)(j,2),y=w[0],S=w[1],C=function(){return S(!1)},k=c.a.useRef();return c.a.createElement(c.a.Fragment,null,c.a.createElement(H,{heading:"Wait for your turn",subHeading:"Hi ".concat(t.playerName,'. Welcome to tin-tin, press "Start turn" when it is your turn. "Start round" will be shown if there are no names left.'),showLeave:!0},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(d,g)}},c.a.createElement(J.a,{isInline:!0,spacing:4,mb:4},c.a.createElement(A.a,null,c.a.createElement(R.a,{htmlFor:"minutes"},"Minutes"),c.a.createElement($.c,{id:"minutes",value:d,min:0,max:5,isInvalid:0===d&&0===g,ref:O,onChange:function(e){var t=O.current.children[0],n=E.current.children[0];0===e&&0===g?(t.setCustomValidity("Either minutes or seconds must be over 0"),t.reportValidity()):(t.setCustomValidity(""),n.setCustomValidity("")),f(e)}},c.a.createElement($.d,{type:"number"}),c.a.createElement($.e,null,c.a.createElement($.b,null),c.a.createElement($.a,null)))),c.a.createElement(A.a,null,c.a.createElement(R.a,{htmlFor:"seconds"},"Seconds"),c.a.createElement($.c,{id:"seconds",value:g,min:0,max:60,isInvalid:0===d&&0===g,ref:E,onChange:function(e){var t=O.current.children[0],n=E.current.children[0];0===e&&0===d?(n.setCustomValidity("Either minutes or seconds must be over 0"),n.reportValidity()):(t.setCustomValidity(""),n.setCustomValidity("")),h(e)}},c.a.createElement($.d,{type:"number"}),c.a.createElement($.e,null,c.a.createElement($.b,null),c.a.createElement($.a,null))))),c.a.createElement(J.a,{isInline:!0,justify:"space-between"},c.a.createElement(z.a,{variant:"outline",variantColor:"blue",rightIcon:U.b,onClick:function(){f(1),h(0)}},"1 Minute"),c.a.createElement(z.a,{variant:"outline",variantColor:"blue",rightIcon:U.b,onClick:function(){h(30),f(0)}},"30 seconds"),c.a.createElement(z.a,{type:a?void 0:"submit",variant:a?"solid":"outline",variantColor:"green",rightIcon:U.i,isDisabled:r||l,onClick:a?function(){return S(!0)}:void 0},"Start ",a?"round":"turn")),c.a.createElement(Y,null),l&&c.a.createElement(m.a,{textAlign:"center",py:4},l," is currently playing"))),c.a.createElement(L.a,{isOpen:y,leastDestructiveRef:k,onClose:C},c.a.createElement(T.f,null),c.a.createElement(L.b,null,c.a.createElement(T.e,{fontSize:"lg",fontWeight:"bold"},"Start new round"),c.a.createElement(T.b,null,"You are about to start a new round, this means all the names in the previous round have been answered."),c.a.createElement(T.d,null,c.a.createElement(z.a,{ref:k,onClick:C},"Cancel"),c.a.createElement(z.a,{variantColor:"green",ml:3,onClick:function(){return n(d,g)}},"Start round")))))}var ee=n(170),te=n(80),ne=n(106);function ae(e){var t=e.toString();return 1===t.length?"0"+t:t}function re(e){var t=e.time,n=e.reset,a=e.toggle,r=e.isPaused,o=Object(q.a)(e,["time","reset","toggle","isPaused"]),l=Object(i.useState)(!1),s=Object(p.a)(l,2),u=s[0],d=s[1];return c.a.createElement(f.a,Object.assign({rounded:"md",borderWidth:1,borderColor:"black",px:1,alignItems:"center"},o),c.a.createElement(P.a,{size:"sm","aria-label":"Hide timer",icon:u?U.d:U.e,variant:"ghost",onClick:function(){return d(!u)}}),c.a.createElement(m.a,{as:"span",fontSize:"md",style:{fontVariantNumeric:"tabular-nums"},opacity:u?0:1,mx:2},ae(Math.floor(t/60)),":",ae(Math.floor(t%60))),c.a.createElement(P.a,{size:"sm","aria-label":r?"Resume timer":"Pause timer",icon:r?U.i:U.h,variant:"ghost",onClick:function(){return a()}}),c.a.createElement(P.a,{size:"sm","aria-label":"Reset timer",icon:U.l,variant:"ghost",onClick:function(){return n()}}))}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(i.useState)((function(){var n=window.localStorage.getItem(e);if(null!==n)try{return JSON.parse(n)}catch(a){}return t})),a=Object(p.a)(n,2),r=a[0],o=a[1];function c(t){window.localStorage.setItem(e,JSON.stringify(t)),o(t)}function l(){window.localStorage.removeItem(e)}return[r,c,l]}function ie(e){var t=e.names,n=e.endTurn,a=e.timer,r=oe("names",t),o=Object(p.a)(r,3),l=o[0],s=o[1],u=o[2],d=oe("currentTile",0),b=Object(p.a)(d,3),v=b[0],g=b[1],h=b[2],E=oe("passed",null),j=Object(p.a)(E,3),w=j[0],y=j[1],S=j[2],C=oe("isOpen",!1),k=Object(p.a)(C,3),x=k[0],I=k[1],W=k[2],A=oe("isCancelable",!0),R=Object(p.a)(A,3),N=R[0],F=R[1],V=R[2],M=function(e,t){var n=Object(i.useState)(!1),a=Object(p.a)(n,2),r=a[0],o=a[1],c=oe("time",e),l=Object(p.a)(c,3),s=l[0],u=l[1],m=l[2],d=Object(i.useState)(Date.now()),f=Object(p.a)(d,2),b=f[0],v=f[1],g=Object(i.useState)((function(){var e=new Audio("".concat(".","/alarm.mp3"));return e.loop=!0,e})),h=Object(p.a)(g,1)[0],E=Object(i.useState)(!1),O=Object(p.a)(E,2),j=O[0],w=O[1];return Object(i.useEffect)((function(){var e=setInterval((function(){if(!0!==r){var e=Date.now();e-b>=1e3?s-1>0?u(s-1):(u(0),o(!0),h.play(),w(!0),t&&t()):v(e)}}),1e3);return function(){return clearInterval(e)}})),[s,r,o,function(){u(e),v(Date.now()),h.pause(),w(!1)},function(){m(),h.pause()},j,function(){h.pause(),w(!1)}]}(a,(function(){F(!1),I(!0)})),_=Object(p.a)(M,7),B=_[0],Y=_[1],q=_[2],G=_[3],X=_[4],K=_[5],Q=_[6],$=function(){q(!1),I(!1)};var Z=c.a.useRef();function ie(e,t){var n=Object(O.a)(l);n[e].answered=!!t,s(n)}var ce=null!==v||null!==w?"".concat((null!==v&&void 0!==v?v:w)+1,"/").concat(l.length):"";return c.a.createElement(c.a.Fragment,null,c.a.createElement(H,{heading:"Tin-tin ".concat(ce)},null!==v||null!==w?c.a.createElement(te.a,{onSwipe:function(e){var t=!1;e===te.b.LEFT?null!==w?(ie(w,!0),y(null),t=!0):y(v):e===te.b.RIGHT&&ie(v,!0),t||(v+1<l.length?g(v+1):g(null))},wrapperHeight:"239",renderButtons:function(e){var t=e.left,n=e.right;return c.a.createElement(J.a,{isInline:!0,flex:"1",justifyContent:"space-between",alignItems:"center",spacing:2,p:8},c.a.createElement(P.a,{size:"lg","aria-label":null===w?"Pass":"Answered passed",icon:null===w?U.c:U.m,variant:"solid",variantColor:null===w?"red":"orange",onClick:t}),null!==w&&null!==v&&c.a.createElement(m.a,{flexGrow:"1"},c.a.createElement("strong",null,"Passed:")," ",l[w].name),c.a.createElement(P.a,{size:"lg","aria-label":null!==v?"Correct":"Answered passed",icon:null!==v?U.a:U.m,variantColor:null!==v?"green":"orange",onClick:null!==v?n:t}))}},c.a.createElement(D.a,{rounded:"lg",borderWidth:1,py:"6rem",px:2,textAlign:"center"},c.a.createElement(m.a,{fontSize:"3xl",className:ne.noselect},null!==v?l[v].name:"Passed: ".concat(l[w].name)))):c.a.createElement(D.a,{py:"6rem",px:2,textAlign:"center"},c.a.createElement(m.a,{fontSize:"3xl",color:"grey.200"},"No more names!")),c.a.createElement(f.a,{justifyContent:"space-between",mt:10},c.a.createElement(re,{time:B,reset:G,initialTime:a,isPaused:Y,toggle:function(){return q(!Y)}}),c.a.createElement(z.a,{variant:"outline",variantColor:"red",rightIcon:U.h,onClick:function(){q(!0),I(!0)}},"End turn"))),c.a.createElement(L.a,{isOpen:x,leastDestructiveRef:N&&Z,onClose:N&&$,closeOnOverlayClick:N,closeOnEsc:N},c.a.createElement(T.f,null),K?c.a.createElement(L.b,null,c.a.createElement(T.e,{fontSize:"lg",fontWeight:"bold",textAlign:"center"},"Time is up!"),c.a.createElement(T.b,{paddingBottom:5},c.a.createElement(J.a,{isInline:!0,justify:"center"},c.a.createElement(z.a,{onClick:Q,flexDirection:"column",paddingX:8,paddingY:12,variantColor:"red"},c.a.createElement(U.o,{size:30,style:{marginBottom:"0.5rem"}}),"Stop Alarm")))):c.a.createElement(L.b,null,c.a.createElement(T.e,{fontSize:"lg",fontWeight:"bold"},"Double check you did not mis-click anything:"),c.a.createElement(T.b,null,l.slice(0,null!==v?v+1:l.length).map((function(e,t){var n=e.name,a=e.answered;return c.a.createElement(ee.a,{id:"name-".concat(t),isChecked:a,onChange:function(e){return ie(t,e.target.checked)},isInline:!0,isFullWidth:!0,key:t,rounded:"md",borderWidth:1,p:2,mb:2},n)})),c.a.createElement(m.a,null,"You scored",": "+l.reduce((function(e,t){var n=t.answered;return e+Number(n)}),0)),B>0&&c.a.createElement(m.a,null,"You have ",ae(Math.floor(B/60)),":",ae(Math.floor(B%60))," left")),c.a.createElement(T.d,null,N&&c.a.createElement(z.a,{ref:Z,onClick:$},"Cancel"),c.a.createElement(z.a,{variantColor:"green",onClick:function(){u(),h(),S(),W(),V(),X(),n(l)},ml:3},"Confirm")))))}var ce=n(171);function le(e){var t=e.title,n=void 0===t?"Something went wrong":t,a=e.error;return c.a.createElement(ce.a,{status:"error",variant:"subtle",flexDirection:"column",justifyContent:"center",textAlign:"center",height:"200px"},c.a.createElement(ce.c,{size:"40px",mr:0}),c.a.createElement(ce.d,{mt:4,mb:1,fontSize:"lg"},n),c.a.createElement(ce.b,{maxWidth:"sm"},a.toString()))}function se(){var e=c.a.useState(),t=Object(p.a)(e,2)[1];return c.a.useCallback((function(e){t((function(){throw e}))}),[t])}var ue=n(107),me=n.n(ue);function de(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(o.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.database().ref("sessions/".concat(t,"/events")).push({data:n,timestamp:Date.now()}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t,n,a,r){return function(o,i){var c=e.carbon?Object.values(e.carbon):[];w.a.database().ref("sessions/".concat(t,"/carbon")).set([].concat(Object(O.a)(c),Object(O.a)(i))).then((function(){a(Object(b.a)({},n,{state:k,playerName:o}))})).catch(r)}}function ve(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}function ge(e,t,n,a,i){return function(c,l){w.a.database().ref("sessions/".concat(e)).once("value").then((function(s){var u=s.val();u.lock||w.a.database().ref("sessions/".concat(e,"/lock")).set(t.playerName).then(Object(o.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u.current?Object.values(u.current):Object.values(u.carbon),u.current){t.next=4;break}return t.next=4,w.a.database().ref("sessions/".concat(e,"/current")).set(Object(O.a)(n)).catch(a);case 4:return t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).then((function(e){n(Object(b.a)({},t,{names:ve(e).map((function(e){return{name:e,answered:!1}})),state:C,timer:60*c+l}))})).then((function(){var t;de(e,{event:"start_turn",current:JSON.stringify(null!==(t=u.current)&&void 0!==t?t:[]),minutes:c,seconds:l,round:i})})).catch(a)}))}}function he(e,t,n,a,r){return function(o){var i=Object(O.a)(o),c=o.filter((function(e){return!e.answered}));o=c.map((function(e){return e.name})),w.a.database().ref("sessions/".concat(t,"/current")).set(Object(O.a)(o)).then((function(){return w.a.database().ref("sessions/".concat(t,"/lock")).set(!1)})).then((function(){a(Object(b.a)({},n,{names:void 0,state:k}))})).then((function(){var n;de(t,{event:"end_turn",n:i.length-c.length,before:JSON.stringify(i),after:JSON.stringify(c),current:JSON.stringify(null!==(n=e.current)&&void 0!==n?n:[])})})).catch(r)}}function Ee(){var e=Object(E.h)().id,t=se(),n=Object(y.a)(w.a.database().ref("sessions/".concat(e))),a=Object(p.a)(n,3),r=a[0],o=a[1],i=a[2],l=W(e),s=Object(p.a)(l,2),u=s[0],d=s[1],b=r&&r.val(),v=me()();return c.a.createElement(c.a.Fragment,null,(o&&!i||!v)&&c.a.createElement(f.a,{alignItems:"center",justifyContent:"center",direction:"column",mt:16},!v&&c.a.createElement(m.a,{mb:4,fontSize:"lg"},"Offline, reconnecting"),c.a.createElement(Q.a,{size:"xl",transform:"translate(-50%, -50%)"})),(i||!b)&&!o&&v&&c.a.createElement(H,null,c.a.createElement(le,{title:i?void 0:"Session ID does not exist",error:i?i.toString():"Please check you copied it correctly"})),!o&&!i&&b&&v&&function(e,t,n,a,r){switch(n.state){case S:return c.a.createElement(K,{count:e.count,onSubmit:be(e,t,n,a,r)});case k:return c.a.createElement(Z,{user:n,startTurn:ge(t,n,a,r,!e.current||0===Object.values(e.current).length),round:!e.current||0===Object.values(e.current).length,noNames:!e.carbon||0===Object.values(e.carbon).length,timer:n.timer,lock:e.lock});case C:return c.a.createElement(ie,{names:n.names,timer:n.timer,endTurn:he(e,t,n,a,r)});default:return"Unknown state: ".concat(n.state)}}(r.val(),e,u,d,t))}var pe=n(172),Oe=n(108);function je(){var e=Object(i.useState)(""),t=Object(p.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(""),o=Object(p.a)(r,2),l=o[0],s=o[1],u=Object(i.useState)(""),m=Object(p.a)(u,2),d=m[0],f=m[1],v=Object(Oe.a)(w.a.auth()),g=Object(p.a)(v,3),h=g[0],O=g[1],j=g[2],y=Object(i.useState)(void 0),S=Object(p.a)(y,2),C=S[0],k=S[1],x=Object(i.useState)(4),I=Object(p.a)(x,2),D=I[0],F=I[1],P=Object(i.useState)(void 0),L=Object(p.a)(P,2),T=L[0],J=L[1],V=Object(i.useState)(""),M=Object(p.a)(V,2),_=M[0],B=M[1],q=W(),G=Object(p.a)(q,2),K=G[0],Z=G[1],ee=se(),te=Object(E.g)();function ne(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),te.push("/sessions/".concat(encodeURIComponent(n)))}},c.a.createElement(A.a,{mb:4},c.a.createElement(R.a,{htmlFor:"session"},"Enter a session id:"),c.a.createElement(pe.a,{size:"md"},c.a.createElement(N.a,{type:"text",id:"session",value:n,onChange:function(e){return a(e.target.value)},style:{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},isRequired:!0}))),c.a.createElement(z.a,{type:"submit",size:"md",variantColor:"green",rightIcon:U.n},"Join")))}return Object(i.useEffect)((function(){K.sessionId&&J(K.sessionId)}),[K.sessionId]),c.a.createElement(c.a.Fragment,null,O&&!j&&c.a.createElement(Q.a,{size:"xl",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),!O&&j&&c.a.createElement(H,null,c.a.createElement(le,{error:j.toString()})),!O&&!j&&h&&(T?c.a.createElement(E.a,{to:"/sessions/".concat(T)}):c.a.createElement(H,{header:!0,heading:"Create a new session",subHeading:"Start a new tin-tin game session with the number of names per player you want. You will be redirected to a shareable url that other players can join from."},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),(_&&_.length>0&&_.length<20?w.a.database().ref("sessions/".concat(_)).once("value").then((function(e){return!e.val()})):Promise.resolve(!1)).then((function(e){e?w.a.database().ref("sessions/".concat(_)).set({count:D,timestamp:Date.now()}).then((function(){Z(Object(b.a)({},K,{sessionId:_}))})).catch(ee):w.a.database().ref("sessions").push({count:D,timestamp:Date.now()}).then((function(e){var t=e.key;Z(Object(b.a)({},K,{sessionId:t}))})).catch(ee)}))}},c.a.createElement(A.a,null,c.a.createElement(R.a,{htmlFor:"count"},"Number of names a player can select"),c.a.createElement($.c,{id:"count",defaultValue:D,min:1,max:10,onChange:F,mb:4},c.a.createElement($.d,{type:"number"}),c.a.createElement($.e,null,c.a.createElement($.b,null),c.a.createElement($.a,null)))),c.a.createElement(A.a,null,c.a.createElement(R.a,{htmlFor:"customID"},"Custom Session ID"),c.a.createElement(N.a,{id:"customID",type:"text",onChange:function(e){return B(e.target.value)},value:_,mb:4})),c.a.createElement(z.a,{variant:"outline",rightIcon:U.g,float:"left",onClick:function(){w.a.auth().signOut().catch(k)}},"Logout"),c.a.createElement(z.a,{type:"submit",variant:"solid",variantColor:"green",rightIcon:U.j,float:"right"},"Create new session")),c.a.createElement(Y,null),c.a.createElement(X,{text:"or",marginY:10}),ne())),!h&&!O&&!j&&c.a.createElement(H,{header:!0,subHeading:"Join a session with a unique session id or login to create a new session (closed beta)."},C&&c.a.createElement(le,{error:C}),ne(),c.a.createElement(X,{text:"or",marginY:10}),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),k(void 0),w.a.auth().signInWithEmailAndPassword(l,d).catch(k)}},c.a.createElement(A.a,{isRequired:!0,mb:4},c.a.createElement(R.a,{htmlFor:"username"},"Username"),c.a.createElement(N.a,{type:"email",id:"username",value:l,onChange:function(e){return s(e.target.value)},mb:2})),c.a.createElement(A.a,{isRequired:!0,mb:4},c.a.createElement(R.a,{htmlFor:"password"},"Password"),c.a.createElement(N.a,{type:"password",id:"password",value:d,onChange:function(e){return f(e.target.value)},mb:2})),c.a.createElement(z.a,{type:"submit",variant:"solid",variantColor:"green",rightIcon:U.f},"Sign in"))))}var we=n(33),ye=n(49),Se=n(43),Ce=n(44),ke=function(e){Object(Ce.a)(n,e);var t=Object(Se.a)(n);function n(e){var a;return Object(we.a)(this,n),(a=t.call(this,e)).state={error:void 0},a}return Object(ye.a)(n,[{key:"render",value:function(){return this.state.error?c.a.createElement(H,null,c.a.createElement(le,{error:this.state.error})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e.toString()}}}]),n}(c.a.Component);var xe=function(e){var t=e.isUpdateAvailable,n=e.updateAssets;return c.a.createElement(h.a,null,c.a.createElement(u.a,{theme:g},c.a.createElement(m.a,{position:"absolute",top:"0",right:"0",p:2,fontSize:"xs"},"0.6.0"),c.a.createElement(d.a,null),c.a.createElement(ke,null,c.a.createElement(E.d,null,c.a.createElement(E.b,{path:"/sessions/:id",component:Ee}),c.a.createElement(E.b,{path:"/",component:je})),t&&c.a.createElement(f.a,{position:"fixed",bottom:2,left:"0",right:"0",justifyContent:"center"},c.a.createElement(ce.a,{status:"info",rounded:"md"},c.a.createElement(ce.c,null),c.a.createElement(ce.b,{mr:2},"A new version of Tin-tin is available! Click to update."),c.a.createElement(P.a,{icon:U.k,onClick:n,size:"sm",variant:"ghost"}))))))},Ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function We(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");Ie?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ae(t,e)}))}}function Ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.waiting&&t&&t.onWaiting&&t.onWaiting(e.waiting),e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Re=Object(i.createContext)(),Ne=function(e){var t=e.children,n=Object(i.useState)(null),a=Object(p.a)(n,2),r=a[0],o=a[1],l=Object(i.useState)(!1),s=Object(p.a)(l,2),u=s[0],m=s[1];Object(i.useEffect)((function(){We({onUpdate:function(e){o(e.waiting),m(!0)},onWaiting:function(e){o(e),m(!0)}})}),[]),Object(i.useEffect)((function(){r&&r.addEventListener("statechange",(function(e){"activated"===e.target.state&&window.location.reload()}))}),[r]);var d=Object(i.useMemo)((function(){return{isUpdateAvailable:u,updateAssets:function(){r&&r.postMessage({type:"SKIP_WAITING"})}}}),[u,r]);return c.a.createElement(Re.Provider,{value:d},t)};function ze(){var e=Object(i.useContext)(Re),t=e.isUpdateAvailable,n=e.updateAssets;return c.a.createElement(c.a.Fragment,null,c.a.createElement(xe,{isUpdateAvailable:t,updateAssets:n}))}window.addEventListener("error",function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.error(t),navigator.serviceWorker){e.next=3;break}return e.abrupt("return");case 3:return e.next=6,navigator.serviceWorker.ready;case 6:((n=e.sent).installing||n.waiting)&&navigator.serviceWorker.ready.then(function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.unregister();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s.a.render(c.a.createElement(Ne,null,c.a.createElement(ze,null)),document.getElementById("root"))},21:function(e,t,n){var a=n(115);n(116),n(119);a.initializeApp({apiKey:"AIzaSyDb3dX8j1yMlbNFGHI9QqRpSBjJ0WsWO4I",authDomain:"tin-tin-5e0d8.firebaseapp.com",databaseURL:"https://tin-tin-5e0d8.firebaseio.com",projectId:"tin-tin-5e0d8",storageBucket:"tin-tin-5e0d8.appspot.com",messagingSenderId:"196227528129",appId:"1:196227528129:web:51ad97056e103f78c2ab40"}),e.exports=a},84:function(e,t,n){e.exports={page:"Page_page__329Ps",footer:"Page_footer__3NR6V"}}},[[109,1,2]]]);
//# sourceMappingURL=main.1a1f5d76.chunk.js.map
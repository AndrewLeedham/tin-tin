(this["webpackJsonptin-tin"]=this["webpackJsonptin-tin"]||[]).push([[0],{103:function(e,t,n){e.exports=n(141)},141:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(62),c=n.n(o),i=n(51),l=n(157),u=n(41),s=n(154),m=Object(u.a)({},s.a,{colors:Object(u.a)({},s.a.colors,{brand:{50:"#ffe2e7",100:"#ffb3bb",200:"#fc8393",300:"#f9526d",400:"#f6224b",500:"#dd0939",600:"#ad0320",700:"#7c000e",800:"#4d0002",900:"#200400"}})}),d=n(67),f=n(53),b=n(15),h=n(32),E=n(37),g=n.n(E),v=n(92),p=0,j=1,O=2;function y(e){var t=window.localStorage.getItem("user");if(t)try{var n=JSON.parse(t);if(e&&n.sessionId!==e)return;return n}catch(a){return void console.warn("Could not read user from local session: ",a)}}function w(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={sessionId:e,admin:t,state:p,names:void 0};return window.localStorage.setItem("user",JSON.stringify(n)),n}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(a.useState)((function(){return e&&y(e)||w(e,!e)})),n=Object(b.a)(t,2),r=n[0],o=n[1];function c(e){window.localStorage.setItem("user",JSON.stringify(e)),o(e)}return[r,c]}var C=n(70),I=n(149),k=n(102),x=n(82),z=n(6),W=n(147),D=n(148);function F(e){var t=e.heading,n=e.subHeading,a=e.children;return r.a.createElement(z.a,{my:"10",maxW:"md",mx:"auto",px:"4"},t&&r.a.createElement(W.a,{as:"h1",mb:2},t),n&&r.a.createElement(D.a,{fontSize:"xl",mb:5},n),a)}var N=n(36);function A(e){var t=e.children;return r.a.createElement("div",{style:{content:"",display:"table",clear:"both"}},t)}function R(e){var t=e.count,n=e.onSubmit,o=Object(a.useState)(new Array(t).fill("")),c=Object(b.a)(o,2),i=c[0],l=c[1];return r.a.createElement(F,{heading:"Submit your names",subHeading:"Enter the ".concat(t,' names you want to put in the tin, then press "Submit names".')},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(i)}},i.map((function(e,t){return r.a.createElement(C.a,{key:t,isRequired:!0,mb:4},r.a.createElement(I.a,{htmlFor:"name-".concat(t)},"Name ",t+1),r.a.createElement(k.a,{id:"name-".concat(t),value:e,onChange:function(e){return function(e,t){var n=Object(h.a)(i);n[e]=t,l(n)}(t,e.target.value)},mb:2,minLength:1,maxLength:30}))})),r.a.createElement(x.a,{type:"submit",variant:"solid",variantColor:"green",rightIcon:N.c,float:"right"},"Submit names"),r.a.createElement(x.a,{variant:"outline",rightIcon:N.d,float:"left",onClick:function(){return n([])}},"Skip and join")),r.a.createElement(A,null))}var T=n(95),J=n(150);function H(e){var t=e.startTurn,n=e.round,a=e.noNames;return r.a.createElement(F,{heading:"Tin-tin",subHeading:'Welcome to tin-tin, press "Start turn" when it is your go. "Start round" will be shown if there are no names left.'},r.a.createElement(J.a,{isInline:!0,justify:"center",spacing:2},r.a.createElement(x.a,{onClick:t,variant:"solid",variantColor:"green",rightIcon:N.e,isDisabled:a},"Start ",n?"round":"turn")))}var P=n(151),B=n(152),L=n(49),q=n(155),U=n(76),M=n(96);function _(e){var t=e.names,n=e.endTurn,o=Object(a.useState)(t),c=Object(b.a)(o,2),i=c[0],l=c[1],u=Object(a.useState)(0),s=Object(b.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)(void 0),E=Object(b.a)(f,2),g=E[0],v=E[1],p=r.a.useState(),j=Object(b.a)(p,2),O=j[0],y=j[1],w=function(){return y(!1)},S=r.a.useRef();function C(e,t){var n=Object(h.a)(i);n[e].answered=!!t,l(n)}var I="undefined"!==typeof m||"undefined"!==typeof g?"".concat((null!==m&&void 0!==m?m:g)+1,"/").concat(i.length):"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{heading:"Tin-tin ".concat(I)},"undefined"!==typeof m||"undefined"!==typeof g?r.a.createElement(U.a,{onSwipe:function(e){var t=!1;e===U.b.LEFT?"undefined"!==typeof g?(C(g,!0),v(void 0),t=!0):v(m):e===U.b.RIGHT&&C(m,!0),t||(m+1<i.length?d(m+1):d(void 0))},renderButtons:function(e){var t=e.left,n=e.right;return r.a.createElement(J.a,{isInline:!0,flex:"1",justifyContent:"space-between",spacing:2,p:8},r.a.createElement(P.a,{size:"lg","aria-label":"undefined"===typeof g?"Pass":"Answered passed",icon:"undefined"===typeof g?N.b:N.a,variant:"solid",variantColor:"undefined"===typeof g?"red":"orange",onClick:t}),"undefined"!==typeof g&&"undefined"!==typeof m&&r.a.createElement(D.a,null,r.a.createElement("strong",null,"Passed:")," ",i[g].name),r.a.createElement(P.a,{size:"lg","aria-label":"undefined"!==typeof m?"Correct":"Answered passed",icon:N.a,variantColor:"undefined"!==typeof m?"green":"orange",onClick:"undefined"!==typeof m?n:t}))}},r.a.createElement(z.a,{rounded:"lg",borderWidth:1,py:"6rem",px:2,textAlign:"center"},r.a.createElement(D.a,{fontSize:"3xl",className:M.noselect},"undefined"!==typeof m?i[m].name:"Passed: ".concat(i[g].name)))):r.a.createElement(z.a,{py:"6rem",px:2,textAlign:"center"},r.a.createElement(D.a,{fontSize:"3xl",color:"grey.200"},"No more names!")),r.a.createElement(J.a,{isInline:!0,justify:"center",spacing:2,mt:10},r.a.createElement(x.a,{variant:"outline",variantColor:"red",rightIcon:N.f,onClick:function(){return y(!0)}},"End turn")),r.a.createElement(A,null)),r.a.createElement(B.a,{isOpen:O,leastDestructiveRef:S,onClose:w},r.a.createElement(L.f,null),r.a.createElement(B.b,null,r.a.createElement(L.e,{fontSize:"lg",fontWeight:"bold"},"Double check you did not mis-click anything:"),r.a.createElement(L.b,null,i.slice(0,"undefined"!==typeof m?m+1:i.length).map((function(e,t){var n=e.name,a=e.answered;return r.a.createElement(q.a,{id:"name-".concat(t),isChecked:a,onChange:function(e){return C(t,e.target.checked)},isInline:!0,isFullWidth:!0,key:t,rounded:"md",borderWidth:1,p:2,mb:2},n)})),r.a.createElement(D.a,null,"You scored",": "+i.reduce((function(e,t){var n=t.answered;return e+Number(n)}),0))),r.a.createElement(L.d,null,r.a.createElement(x.a,{ref:S,onClick:w},"Cancel"),r.a.createElement(x.a,{variantColor:"green",onClick:function(){return n(i)},ml:3},"Confirm")))))}var G=n(156);function V(e){var t=e.error;return r.a.createElement(G.a,{status:"error",variant:"subtle",flexDirection:"column",justifyContent:"center",textAlign:"center",height:"200px"},r.a.createElement(G.c,{size:"40px",mr:0}),r.a.createElement(G.d,{mt:4,mb:1,fontSize:"lg"},"Something went wrong"),r.a.createElement(G.b,{maxWidth:"sm"},t.toString()))}function Y(){var e=r.a.useState(),t=Object(b.a)(e,2)[1];return r.a.useCallback((function(e){t((function(){throw e}))}),[t])}function K(e,t,n,a,r){return function(o){var c=e.carbon?Object.values(e.carbon):[];g.a.database().ref("sessions/".concat(t,"/carbon")).set([].concat(Object(h.a)(c),Object(h.a)(o))).catch(r),a(Object(u.a)({},n,{state:O}))}}function Q(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}function X(e,t,n,a,r){return function(){var o=e.current?Object.values(e.current):Object.values(e.carbon);e.current||g.a.database().ref("sessions/".concat(t,"/current")).set(Object(h.a)(o)).catch(r),a(Object(u.a)({},n,{names:Q(o).map((function(e){return{name:e,answered:!1}})),state:j}))}}function $(e,t,n,a){return function(r){r=r.filter((function(e){return!e.answered})).map((function(e){return e.name})),g.a.database().ref("sessions/".concat(e,"/current")).set(Object(h.a)(r)).catch(a),n(Object(u.a)({},t,{names:void 0,state:O}))}}function Z(){var e=Object(f.g)().id,t=Y(),n=Object(v.a)(g.a.database().ref("sessions/".concat(e))),a=Object(b.a)(n,3),o=a[0],c=a[1],i=a[2],l=S(e),u=Object(b.a)(l,2),s=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,c&&!i&&r.a.createElement(T.a,{size:"xl",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),i&&!c&&r.a.createElement(F,null,r.a.createElement(V,{error:i.toString()})),!c&&!i&&function(e,t,n,a,o){switch(n.state){case p:return r.a.createElement(R,{count:e.count,onSubmit:K(e,t,n,a,o)});case O:return r.a.createElement(H,{startTurn:X(e,t,n,a,o),round:!e.current||0===Object.values(e.current).length,noNames:!e.carbon||0===Object.values(e.carbon).length});case j:return r.a.createElement(_,{names:n.names,admin:n.admin,endTurn:$(t,n,a,o)});default:return"Unknown state: ".concat(n.state)}}(o.val(),e,s,m,t))}var ee=n(153),te=n(75),ne=n(100);function ae(){var e=Object(a.useState)(void 0),t=Object(b.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(void 0),i=Object(b.a)(c,2),l=i[0],s=i[1],m=Object(ne.a)(g.a.auth()),d=Object(b.a)(m,3),h=d[0],E=d[1],v=d[2],p=Object(a.useState)(void 0),j=Object(b.a)(p,2),O=j[0],y=j[1],w=Object(a.useState)(4),z=Object(b.a)(w,2),W=z[0],D=z[1],N=Object(a.useState)(void 0),R=Object(b.a)(N,2),J=R[0],H=R[1],P=S(),B=Object(b.a)(P,2),L=B[0],q=B[1],U=Y();return Object(a.useEffect)((function(){L.sessionId&&H(L.sessionId)}),[L.sessionId]),r.a.createElement(r.a.Fragment,null,E&&!v&&r.a.createElement(T.a,{size:"xl",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),!E&&v&&r.a.createElement(F,null,r.a.createElement(V,{error:v.toString()})),!E&&!v&&h&&(J?r.a.createElement(f.a,{to:"/sessions/".concat(J)}):r.a.createElement(F,{heading:"Create a new session",subHeading:"Start a new tin-tin game session with the number of names per player you want. You will be redirected to a shareable url that other players can join from."},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),g.a.database().ref("sessions").push({count:W,timestamp:Date.now()}).then((function(e){var t=e.key;q(Object(u.a)({},L,{sessionId:t}))})).catch(U)}},r.a.createElement(C.a,null,r.a.createElement(I.a,{htmlFor:"count"},"Number of names a player can select"),r.a.createElement(ee.c,{id:"count",defaultValue:W,min:1,max:10,onChange:D,mb:4},r.a.createElement(ee.d,null),r.a.createElement(ee.e,null,r.a.createElement(ee.b,null),r.a.createElement(ee.a,null)))),r.a.createElement(x.a,{variant:"outline",rightIcon:te.c,float:"left",onClick:function(){g.a.auth().signOut().catch(y)}},"Logout"),r.a.createElement(x.a,{type:"submit",variant:"solid",variantColor:"green",rightIcon:te.a,float:"right"},"Create new session")),r.a.createElement(A,null))),!h&&!E&&!v&&r.a.createElement(F,null,O&&r.a.createElement(V,{error:O}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),y(void 0),g.a.auth().signInWithEmailAndPassword(n,l).catch(y)}},r.a.createElement(C.a,{isRequired:!0,mb:4},r.a.createElement(I.a,{htmlFor:"username"},"Username"),r.a.createElement(k.a,{type:"email",id:"username",value:n,onChange:function(e){return o(e.target.value)},mb:2})),r.a.createElement(C.a,{isRequired:!0,mb:4},r.a.createElement(I.a,{htmlFor:"password"},"Password"),r.a.createElement(k.a,{type:"password",id:"password",value:l,onChange:function(e){return s(e.target.value)},mb:2})),r.a.createElement(x.a,{type:"submit",variant:"solid",variantColor:"green",rightIcon:te.b},"Sign in"))))}var re=n(29),oe=n(44),ce=n(38),ie=n(39),le=function(e){Object(ie.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).state={error:void 0},a}return Object(oe.a)(n,[{key:"render",value:function(){return this.state.error?r.a.createElement(F,null,r.a.createElement(V,{error:this.state.error})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e.toString()}}}]),n}(r.a.Component);var ue=function(){return r.a.createElement(d.a,null,r.a.createElement(i.a,{theme:m},r.a.createElement(l.a,null),r.a.createElement(le,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/sessions/:id",component:Z}),r.a.createElement(f.b,{path:"/",component:ae})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},37:function(e,t,n){var a=n(108);n(109),n(112);a.initializeApp({apiKey:"AIzaSyDb3dX8j1yMlbNFGHI9QqRpSBjJ0WsWO4I",authDomain:"tin-tin-5e0d8.firebaseapp.com",databaseURL:"https://tin-tin-5e0d8.firebaseio.com",projectId:"tin-tin-5e0d8",storageBucket:"tin-tin-5e0d8.appspot.com",messagingSenderId:"196227528129",appId:"1:196227528129:web:51ad97056e103f78c2ab40"}),e.exports=a},96:function(e,t,n){e.exports={noselect:"Playing_noselect__28UVJ"}}},[[103,1,2]]]);
//# sourceMappingURL=main.95ccaa0e.chunk.js.map